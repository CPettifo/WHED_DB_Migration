CREATE TABLE IF NOT EXISTS cosc320_whed_users (
    user_id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    username VARCHAR(60) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    reset_pass_token VARCHAR(255) DEFAULT NULL,
    connection_count INT UNSIGNED NOT NULL DEFAULT 0,
    springer_count INT UNSIGNED NOT NULL DEFAULT 0,
    email VARCHAR(64) DEFAULT NULL,
    language VARCHAR(2) NOT NULL DEFAULT 'en',
    role TINYINT UNSIGNED NOT NULL DEFAULT 0,
    status TINYINT UNSIGNED NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    last_access TIMESTAMP NULL DEFAULT NULL,
    last_name VARCHAR(100) NOT NULL DEFAULT '',
    first_name VARCHAR(100) NOT NULL DEFAULT '',
    organization VARCHAR(100) NOT NULL DEFAULT '',
    address TEXT,
    postal_code VARCHAR(30) NOT NULL DEFAULT '',
    city VARCHAR(100) NOT NULL DEFAULT '',
    country VARCHAR(100) NOT NULL DEFAULT '',
    phone VARCHAR(50) NOT NULL DEFAULT '',
    fax VARCHAR(50) NOT NULL DEFAULT '',
    website VARCHAR(100) NOT NULL DEFAULT '',
    title VARCHAR(100) NOT NULL DEFAULT '',
    job_function VARCHAR(100) NOT NULL DEFAULT '',
    account_expiry TIMESTAMP NULL DEFAULT NULL,
    payment_status BOOLEAN NOT NULL DEFAULT FALSE,
    waiting_status TINYINT UNSIGNED NOT NULL DEFAULT 0,
    is_ihub_buyer BOOLEAN NOT NULL DEFAULT FALSE,
    password_changed_at TIMESTAMP NULL DEFAULT NULL,
    total_exports INT UNSIGNED NOT NULL DEFAULT 0,
    json_usage_count INT NOT NULL DEFAULT 0,
    PRIMARY KEY (user_id),
    UNIQUE INDEX idx_username (username),
    INDEX idx_email (email),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=DYNAMIC;